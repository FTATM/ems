<!-- Bootstrap 5 CDN -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
    integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
    crossorigin="anonymous"></script>
<!-- Modal -->
<script type="text/javascript" src="https://cdn.canvasjs.com/canvasjs.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/raphael@2.3.0/raphael.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/justgage@1.3.2/justgage.js"></script>
<!-- <script src="https://cdn.plot.ly/plotly-latest.min.js"></script> -->
<script src="https://cdn.jsdelivr.net/npm/canvas-gauges/gauge.min.js"></script>

<!-- map -->
<script src="https://cdn.babylonjs.com/babylon.js"></script>

<!-- gauge -->
<script src="https://code.jscharting.com/latest/jscharting.js"></script>

<!-- UI popup -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<!-- excel file -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

<!-- covert file PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>

<!-- insert Qrcode -->
<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>



<script>
    var openSidebar = document.getElementById('sidebar_open');
    var closeSidebar = document.getElementById('sidebar_close');
    var sidebar = document.getElementById('sidebar');
    var mainContent = document.getElementById('main-content');
    openSidebar.addEventListener('click', () => {
        sidebar.classList.toggle('collapsed');
    });
    if (closeSidebar) {
        closeSidebar.addEventListener('click', () => {
            sidebar.classList.toggle('collapsed');
        });
    }

    function redirect(target) {
        window.location.href = "../pages/" + target + ".php";
    }


    function showLoading() {
        if (document.getElementById('loading-overlay')) return; // ป้องกันซ้อนซ้ำ

        const overlay = document.createElement('div');
        overlay.id = 'loading-overlay';

        const spinner = document.createElement('div');
        spinner.id = 'loading-spinner';

        overlay.appendChild(spinner);
        document.body.appendChild(overlay);
    }

    function hideLoading() {
        const overlay = document.getElementById('loading-overlay');
        if (overlay) {
            overlay.remove();
        }
    }

    function alertMessages(icontxt = 'warning', titletxt = "Default title text.", textmessage = 'Default txt message.', timerShow = 1500, confirmbtn = false) {
        Swal.fire({
            icon: icontxt,
            title: titletxt,
            text: textmessage,
            timer: timerShow,
            showConfirmButton: confirmbtn
        });
        window.history.replaceState({}, document.title, window.location.pathname);
    }

    function setSession(key, value) {
        return fetch("../components/set-session.php", {
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: "key=" + key + "&value=" + value
        })
            .then(res => res.json())
            .then(data => {
                return true;
            })
            .catch(e => {
                alertMessages('error', 'Error set session', "Set session error please contact administrators.");
                console.error("error set session : ", e);
                return false;
            })
    }

</script>