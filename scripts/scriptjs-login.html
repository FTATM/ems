<script>
    // แสดง Alert เมื่อ logout สำเร็จ
    if (window.location.search.includes('logout=success')) {
        alertMessages('success', 'ออกจากระบบสำเร็จ', 'คุณได้ออกจากระบบเรียบร้อยแล้ว');
    }
    if (window.location.search.includes('timeout=1')) {
        alertMessages('warning', 'การเข้าสู่ระบบหมดอายุ', 'ระยะเวลาในการใช้งานของคุณสิ้นสุดลงแล้ว กรุณาเข้าสู่ระบบใหม่อีกครั้ง.', 25000, true);
    }

    function login() {
        showLoading();
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;
        let formdata = new FormData();
        formdata.append('username', username);
        formdata.append('password', password);

        fetch('../config/login.php', {
            method: 'POST',
            body: formdata
        })
            .then(res => res.json())
            .then(data => {
                if (data.success) {
                    alertMessages('success', 'เข้าสู่ระบบสำเร็จ', 'ยินดีต้อนรับคุณ ' + username, 2000);
                    setTimeout(() => {
                        window.location.href = 'locations.php';
                    }, 2000);
                } else {
                    alertMessages('error', 'ผิดพลาด', data.message, 2000);
                }
                hideLoading();
            });
    }
</script>